/** Function to automatically check all API Admin Access Scope Checkboxes on Shopify Custom App Development Permissions Page
- Install Custom App on Shopify
- Navigate to Configuration Page (or click Configure Admin API Access on Overview Page)
- Paste Script into Browser Console and Run

After running the script all available checkboxes will be automatically selected. 
*/

(function() {
    // Select all checkboxes
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    let checkedCount = 0;
    let skippedCount = 0;

    checkboxes.forEach((cb) => {
        // Skip if the checkbox is disabled or already checked
        if (cb.disabled) {
            skippedCount++;
            return; 
        }

        if (!cb.checked) {
            // 1. Focus to simulate user navigation
            cb.focus();
            
            // 2. Use .click() as it's the most reliable way to trigger React state updates
            cb.click();
            
            // 3. Manually dispatch change event as a backup for the UI state
            cb.dispatchEvent(new Event('change', { bubbles: true }));
            
            checkedCount++;
        }
    });

    console.log(`âœ… Success: Checked ${checkedCount} enabled boxes.`);
    console.log(`ðŸš« Skipped: ${skippedCount} disabled boxes (these cannot be toggled via script).`);
    
    if (checkedCount > 0) {
        console.log("Check now if the 'Save' button is active.");
    }
})();
